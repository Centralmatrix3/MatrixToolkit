# > Surge 配置

# > 2023.02.10 22:35

[General]
# 日志等级
loglevel = notify
# 使用DNS-over-HTTPS
dns-server = 223.5.5.5, 119.29.29.29, 114.114.114.114
# 自定义DNS服务器
skip-proxy = www.abchina.com.cn,localhost, *.local, injections.adguard.org, local.adguard.org, captive.apple.com, guzzoni.apple.com, 0.0.0.0/8, 10.0.0.0/8, 17.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 192.0.0.0/24, 192.0.2.0/24, 192.168.0.0/16, 192.88.99.0/24, 198.18.0.0/15, 198.51.100.0/24, 203.0.113.0/24, 224.0.0.0/4, 240.0.0.0/4, 255.255.255.255/32
# 跳过某个域名或IP段以下列表将不会由Surge处理
wifi-assist = true
# Wi-Fi异常时2秒后尝试使用数据网络建立连接
allow-wifi-access = true
# 作为代理服务器向Wi-Fi网络其他设备提供服务器
wifi-access-http-port = 6152
# Surge-iOS供外网访问的服务端口
wifi-access-socks5-port = 6153
# SOCKS5代理服务端口
http-listen = 0.0.0.0:6152
# Surge-Mac供外网访问的服务端口
socks5-listen = 0.0.0.0:6153
# SOCKS5代理服务端口
external-controller-access = surgepasswd@0.0.0.0:6170
# 允许外部控制器访问Surge
network-framework = false
# 启用Network.framework
exclude-simple-hostnames = true
# 不包括简单主机名
ipv6 = false
# 是否启动完整的IPv6支持
test-timeout = 3
# 测速超时
internet-test-url = http://bing.com/
# 使用网络诊断功能时访问的URL
proxy-test-url = http://www.gstatic.com/generate_204
# 测试代理策略时的URL
geoip-maxmind-url = https://raw.githubusercontent.com/Loyalsoldier/geoip/release/Country.mmdb
# GEOIP数据库
encrypted-dns-server = https://doh.pub/dns-query
ipv6-vif = disabled

[Replica]
hide-apple-request = 1
hide-crashlytics-request = true
use-keyword-filter = false
hide-udp = 0
hide-crash-reporter-request = 0

[Proxy Group]
# 自行选择
自行选择 = select, no-alert=0, hidden=0, include-all-proxies=0, update-interval=0, policy-regex-filter=^, policy-path=
# 自动选择
自动选择 = url-test, no-alert=0, hidden=0, include-all-proxies=0, update-interval=0, policy-regex-filter=^, policy-path=
# 苹果服务
苹果服务 = select, DIRECT, REJECT, 自行选择, 自动选择, 香港节点, 台湾节点, 日本节点, 韩国节点, 狮城节点, 美国节点, no-alert=0, hidden=0, include-all-proxies=0
# 谷歌服务
谷歌服务 = select, DIRECT, REJECT, 自行选择, 自动选择, 香港节点, 台湾节点, 日本节点, 韩国节点, 狮城节点, 美国节点, no-alert=0, hidden=0, include-all-proxies=0
# 速度测试
速度测试 = select, DIRECT, REJECT, 自行选择, 自动选择, 香港节点, 台湾节点, 日本节点, 韩国节点, 狮城节点, 美国节点, no-alert=0, hidden=0, include-all-proxies=0
# 港台番剧
港台番剧 = select, DIRECT, REJECT, 自行选择, 自动选择, 香港节点, 台湾节点, 日本节点, 韩国节点, 狮城节点, 美国节点, no-alert=0, hidden=0, include-all-proxies=0
# 国内媒体
国内媒体 = select, DIRECT, REJECT, no-alert=0, hidden=0, include-all-proxies=0
# 国际媒体
国际媒体 = select, DIRECT, REJECT, 自行选择, 自动选择, 香港节点, 台湾节点, 日本节点, 韩国节点, 狮城节点, 美国节点, no-alert=0, hidden=0, include-all-proxies=0
# 全球加速
全球加速 = select, DIRECT, REJECT, 自行选择, 自动选择, 香港节点, 台湾节点, 日本节点, 韩国节点, 狮城节点, 美国节点, no-alert=0, hidden=0, include-all-proxies=0
# 黑白名单
黑白名单 = select, DIRECT, REJECT, 自行选择, 自动选择, 香港节点, 台湾节点, 日本节点, 韩国节点, 狮城节点, 美国节点, no-alert=0, hidden=0, include-all-proxies=0
# 香港节点
香港节点 = url-test, update-interval=0, policy-regex-filter=(?=.*(香港|港|HK|(?i)HongKong))^((?!(台湾|日本|韩国|新加坡|美国)).)*$, no-alert=0, hidden=0, include-all-proxies=0, include-other-group=自动选择
# 台湾节点
台湾节点 = url-test, update-interval=0, policy-regex-filter=(?=.*(台湾|台|TW|(?i)Taiwan))^((?!(香港|日本|韩国|新加坡|美国)).)*$, no-alert=0, hidden=0, include-all-proxies=0, include-other-group=自动选择
# 日本节点
日本节点 = url-test, update-interval=0, policy-regex-filter=(?=.*(日本|日|JP|(?i)Japan))^((?!(香港|台湾|韩国|新加坡|美国)).)*$, no-alert=0, hidden=0, include-all-proxies=0, include-other-group=自动选择
# 韩国节点
韩国节点 = url-test, update-interval=0, policy-regex-filter=(?=.*(韩国|韩|KR|(?i)SouthKorea))^((?!(香港|台湾|日本|新加坡|美国)).)*$, no-alert=0, hidden=0, include-all-proxies=0, include-other-group=自动选择
# 狮城节点
狮城节点 = url-test, update-interval=0, policy-regex-filter=(?=.*(新加坡|狮|SG|(?i)Singapore))^((?!(香港|台湾|日本|韩国|美国)).)*$, no-alert=0, hidden=0, include-all-proxies=0, include-other-group=自动选择
# 美国节点
美国节点 = url-test, update-interval=0, policy-regex-filter=(?=.*(美国|美|US|(?i)UnitedStates))^((?!(香港|台湾|日本|韩国|新加坡)).)*$, no-alert=0, hidden=0, include-all-proxies=0, include-other-group=自动选择

[Rule]
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Direct/Direct.list,DIRECT
DOMAIN-SET,https://raw.githubusercontent.com/privacy-protection-tools/anti-AD/master/anti-ad-surge2.txt,REJECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/WeChat/WeChat.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/GlobalMedia/GlobalMedia.list,国际媒体
DOMAIN-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/GlobalMedia/GlobalMedia_Domain.list,国际媒体
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/BiliBili/BiliBili.list,港台番剧
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/ChinaMedia/ChinaMedia.list,国内媒体
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Apple/Apple.list,苹果服务
DOMAIN-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Apple/Apple_Domain.list,苹果服务
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Google/Google.list,谷歌服务
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Global/Global.list,全球加速
DOMAIN-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Global/Global_Domain.list,全球加速
RULE-SET,LAN,DIRECT
GEOIP,CN,DIRECT
FINAL,黑白名单,dns-failed

[URL Rewrite]
^https?://(www.)?(g|google).cn https://www.google.com 302

[MITM]